# FIX: Microsoft OAuth Azure AD Error

## Error You're Seeing

```
AADSTS700016: Application with identifier 'vadhavanapratham1947' was not found in the directory 'iite.indusuni.ac.in'
```

## Root Cause

You're using an email address as the Application ID in Supabase, but you need to create a proper Azure AD app registration first.

## STEP-BY-STEP FIX

### Step 1: Create Azure AD App Registration

1. **Go to Azure Portal**
   - Visit: https://portal.azure.com/
   - Sign in with your Microsoft account

2. **Navigate to Azure Active Directory**
   - Search for "Azure Active Directory" in the top search bar
   - Click on it

3. **Go to App Registrations**
   - In the left sidebar, click "App registrations"
   - Click "New registration"

4. **Fill Registration Form**
   - **Name**: `Smart Inventory System`
   - **Supported account types**: Choose "Accounts in any organizational directory and personal Microsoft accounts"
   - **Redirect URI**:
     - Platform: Web
     - URI: `https://qoqjtcpnlpifyshrfwet.supabase.co/auth/v1/callback`
   - Click "Register"

### Step 2: Get Application Credentials

After registration, you'll be on the app overview page:

1. **Copy Application (client) ID**
   - This will look like: `12345678-1234-1234-1234-123456789012`
   - This is what goes in Supabase "Client ID" field (NOT your email)

2. **Create Client Secret**
   - Click "Certificates & secrets" in left sidebar
   - Click "New client secret"
   - Description: "Supabase OAuth Secret"
   - Expires: Choose your preference (24 months recommended)
   - Click "Add"
   - **IMPORTANT**: Copy the secret VALUE immediately (it won't show again)

### Step 3: Configure in Supabase

1. **Go to Supabase Dashboard**
   - Visit: https://supabase.com/dashboard
   - Go to Authentication > Providers
   - Find "Azure" (Microsoft OAuth)

2. **Enter Correct Credentials**
   - **Client ID**: Paste the Application (client) ID from Azure (looks like `12345678-1234-1234-1234-123456789012`)
   - **Client Secret**: Paste the secret value you copied from Azure
   - Click "Save"

## Expected Format vs What You Had

### ❌ What You Were Using (Wrong):

```
Client ID: vadhavanapratham1947 (this is an email, not an app ID)
```

### ✅ What You Need (Correct):

```
Client ID: 12345678-1234-1234-1234-123456789012 (Azure App ID)
Client Secret: abc123def456ghi789 (Azure client secret)
```

## Important Notes

1. **Application ID ≠ Email**: The Azure Application ID is a UUID, not your email address
2. **Directory Issue**: The error mentions `iite.indusuni.ac.in` because Azure is trying to find your "app" in that directory, but you need to register it first
3. **Client Secret**: This is generated by Azure, not something you create yourself

## Quick Verification

After completing the setup:

- **Client ID** should be a UUID format: `xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx`
- **Client Secret** should be a random string: `abc123def456ghi789...`
- **Redirect URI** in Azure should be: `https://qoqjtcpnlpifyshrfwet.supabase.co/auth/v1/callback`

Once you complete these steps, the Microsoft OAuth button should work without the "Application not found" error.
